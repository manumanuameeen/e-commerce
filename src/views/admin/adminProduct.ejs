<%- include("../partials/admin/header") %>

    <div class="main-content">
        <div class="content-header">
            <h2 class="content-title">Products</h2>
        </div>

        <div class="card">
            <div class="card-body">
                <!-- Search Bar -->
                <div class="search-container">
                    <form action="/admin/products" method="get">
                        <div class="search-input-group">
                            <input type="text" class="search-input" placeholder="Search products or brands"
                                name="search">
                            <button class="btn btn-primary" type="submit">Search</button>
                        </div>
                    </form>
                </div>

                <!-- Products Table -->
                <div class="table-responsive">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Product name</th>
                                <th>Category</th>
                                <th>Sale Price</th>
                                <th>Offer Price</th>
                                <th>Offer</th>
                                <th>Quantity</th>
                                <th>Action</th>
                                <th>Edit</th>
                            </tr>
                        </thead>
                        <tbody>
                            <% for (let i=data.length - 1; i>= 0; i--) { %>
                                <tr>
                                    <td>
                                        <%= data[i].productName %>
                                    </td>
                                    <td>
                                        <%= data[i].category.name %>
                                    </td>
                                    <td>
                                        <%= data[i].regularPrice %>
                                    </td>
                                    <td>
                                        <%= data[i].salePrice %>
                                    </td>
                                    <td></td>
                                    <td>
                                        <%= data[i].quantity %>
                                    </td>
                                    <td>
                                        <%= data[i].someProperty %>
                                    </td>
                                    <td></td>
                                    <td>
                                        <div class="action-buttons">
                                            <button class="btn btn-primary btn-sm">View</button>
                                            <button class="btn btn-danger btn-sm">Delete</button>
                                        </div>
                                    </td>
                                    <td>
                                        <a href="/admin/edit-product/" class="btn btn-info btn-sm">Edit</a>
                                    </td>
                                </tr>
                                <% } %>

                        </tbody>
                    </table>
                    <!-- paggination -->
                    <!-- Pagination -->
                    <div class="pagination-container">
                        <% if (currentPage> 1) { %>
                            <a href="?page=<%= currentPage - 1 %>">&laquo; Previous</a>
                            <% } %>

                                <% for (let i=1; i <=totalPages; i++) { %>
                                    <% if (i===currentPage) { %>
                                        <span class="current-page">
                                            <%= i %>
                                        </span>
                                        <% } else { %>
                                            <a href="?page=<%= i %>">
                                                <%= i %>
                                            </a>
                                            <% } %>
                                                <% } %>

                                                    <% if (currentPage < totalPages) { %>
                                                        <a href="?page=<%= currentPage + 1 %>">Next &raquo;</a>
                                                        <% } %>
                    </div>
                </div>
            </div>
        </div>
    </div>